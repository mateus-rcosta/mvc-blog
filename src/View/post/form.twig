{% extends "layout.twig" %}

{% block content %}
    <h1>Criar Novo Post</h1>

    <form action="/post/create" method="POST">
        <div class="form-group">
            <label for="titulo">Título:</label>
            <input type="text" id="titulo" name="titulo" required
                   class="form-control"
                   value="{{ post.titulo | default('') }}">
        </div>

        <div class="form-group">
            <label for="conteudo">Conteúdo:</label>
            <textarea id="conteudo" name="conteudo" required
                      class="form-control"
                      rows="5">{{ post.conteudo | default('') }}</textarea>
        </div>

        <div class="form-group">
            <label for="authorId">Autor:</label>
            <select id="authorId" name="authorId" class="form-control">
                <option value="">Selecione um autor</option>
                {% for author in authors %}
                    <option value="{{ author.id }}"
                            {% if post.authorId is defined and post.authorId == author.id %}selected{% endif %}>
                        {{ author.nome }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="categoryId">Categoria:</label>
            <select id="categoryId" name="categoryId" class="form-control">
                <option value="">Selecione uma categoria</option>
                {% for category in categories %}
                    <option value="{{ category.id }}"
                            {% if post.categoryId is defined and post.categoryId == category.id %}selected{% endif %}>
                        {{ category.nome }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="userId">Usuário:</label>
            <select id="userId" name="userId" required class="form-control">
                <option value="">Selecione um Usuário</option>
                {% for user in users %}
                    <option value="{{ user.id }}"
                            {% if post.userId is defined and post.userId == user.id %}selected{% endif %}>
                        {{ user.nome }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label>
                <input type="checkbox" name="published" 
                       {% if post.published %}checked{% endif %}>
                Publicar post
            </label>
        </div>

        <button type="submit" class="btn btn-primary">Salvar Post</button>
        <a href="/post" class="btn btn-secondary">Cancelar</a>
    </form>
{% endblock %}